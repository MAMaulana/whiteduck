<!doctype html>
<html lang="en" class="scroll-smooth">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="../dist/output.css">
        <link rel="icon" href="src/Foto/GEOCRIME.png" type="image.png">
        <title>GEOCRIME</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="dist/output.css" />
        <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
    <style>
      body {
        font-family: 'Nunito', sans-serif;
        background: linear-gradient(to bottom, #03001e, #7303c0, #03001e);
      }

      /* Container for the map */
      .container {
        width: 100%; /* Full width */
        height: 70vh; /* Reduced height to make it more compact */
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 1rem;
        max-width: 100%; /* Ensures no overflow */
      }

      /* Map styling */
      #map {
        width: 75%; /* Full width */
        height: 50%; /* Full height */
        max-height: 500px; /* Fixed max height to prevent overflow */
        overflow: auto; /* Enables scrolling */
        border: 2px solid #ddd;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      /* Responsive design */
      @media (min-width: 768px) {
        .container {
          padding: 2rem; /* Larger padding for bigger screens */
        }
        #map {
          max-height: 80vh; /* Responsive map height */
        }
      }
    </style>
    </head>
    <body class="text-white overscroll-none min-h-screen h-full">
        <!-- NAVBAR -->
  <nav class="w-full top-0 left-0 z-50 bg-transparent backdrop-blur-md border-b border-white/10">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4">
      <!-- Logo -->
      <a href="../index.html" class="flex items-center gap-2">
        <img src="GEOCRIME.png" alt="GEOCRIME Logo" class="h-7" />
        <span class="font-bold tracking-wide text-lg font-nunito">GEOCRIME</span>
      </a>
      
      <!-- Desktop Menu -->
      <ul class="hidden md:flex gap-10 text-base font-medium">
        <li><a href="#home" class="hover:text-indigo-400 transition">Home</a></li>
        <li><a href="#aboutus" class="hover:text-indigo-400 transition">About Us</a></li>
        <li><a href="#projects" class="hover:text-indigo-400 transition">Projects</a></li>
      </ul>
      <!-- Mobile Menu Button -->
      <button id="menu-btn" class="md:hidden p-2 rounded focus:outline-none focus:ring-2 focus:ring-white" aria-label="Open menu">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
    <!-- Mobile Menu (hidden by default) -->
    <div id="mobile-menu" class="md:hidden px-6 pb-4 pt-0 hidden flex-col gap-3 bg-[#c0a9e1]/80 backdrop-blur-md">
      <a href="#home" class="block py-2 hover:text-indigo-400">Home</a>
      <a href="#aboutus" class="block py-2 hover:text-indigo-400">About Us</a>
      <a href="#projects" class="block py-2 hover:text-indigo-400">Projects</a>
    </div>
  </nav>
    <!-- Navigation Buttons -->
        <div class="flex justify-between mt-8">
        <a href="../WEBGIS CURAS/curas.html" class="text-white px-8 py-2 hover:text-indigo-600 transition duration-300 inline-block">
            Back
        </a>
        <!-- Menggunakan <a> untuk navigasi -->
        <a href="../WEBGIS CURANMOR/curanmor.html" class="text-white px-8 py-2 hover:text-indigo-600 transition duration-300 inline-block">
            Next
        </a>
    </div>
    <!--Project Section-->
     <!-- Project Section -->
  <section class="py-16 px-6">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-indigo-100 leading-tight mb-6" data-aos="fade-up" data-aos-delay="200">
        Curat
      </h1>
      <p class="text-lg text-indigo-100 max-w-2xl mx-auto mb-24" data-aos="fade-up" data-aos-delay="200">
        Curat (pencurian dengan pemberatan) diatur dalam Pasal 363 KUHP yang artinya pencurian biasa yang dalam pelaksanaannya disertai oleh keadaan tertentu yang memberatkan. 
    </p>
    </div>
   
  <section id="map" class="container py-10 px-6" data-aos="fade-up" data-aos-delay="300">
    <!-- Map Container -->
    <div class="map-container">
      <div class="container">
        <div id="map" class="rounded-lg shadow-xl">
          <!-- Map content goes here -->
        </div>
      </div>
    </div>
  </section>
  <div class="container mx-auto mt-20 mb-20 bg-gradient-to-r from-purple-600 to-blue-500 rounded-lg shadow-lg">
    <!-- Title Section -->
    <div class="text-center mb-8">
        <h1 class="text-2xl font-extrabold text-white leading-tight">
            Peta Analisis Kerawanan Curat di Kota Surabaya
        </h1>
    </div>

      <div class="container">
      <div class="left-column">
        <p class="intro-text px-4">
          Peta analisis kerawanan curat di Kota Surabaya menunjukkan konsentrasi tinggi kejadian pencurian dengan pemberatan di tiga wilayah utama: timur (Rungkut dan Gunung Anyar), tengah (Wonokromo dan Sawahan), serta selatan kota. Wilayah-wilayah ini memiliki kepadatan penduduk dan aktivitas tinggi, yang menjadikannya lebih rentan terhadap curat.
        </p>
        <p class="main-text px-4">
          Sebaliknya, kawasan pesisir seperti Kenjeran, Bulak, Asemrowo, dan Pabean Cantikan menunjukkan tingkat kerawanan yang lebih rendah, dengan karakteristik sosial yang lebih stabil dan kepadatan yang lebih rendah. Hal ini mencerminkan bahwa kawasan non-pesisir, dengan lebih banyak pusat ekonomi dan transportasi, lebih rentan terhadap tindak kriminalitas dibandingkan kawasan pesisir yang lebih terkendali.
        </p>
      </div>

      <div class="right-column px-4">
        <p class="additional-info">
          Hal ini mencerminkan bahwa kawasan non-pesisir, dengan lebih banyak pusat ekonomi dan transportasi, lebih rentan terhadap tindak kriminalitas dibandingkan kawasan pesisir yang lebih terkendali.
        </p>
      </div>
    </div>



    <!-- Transition Overlay -->
  <div id="transition-overlay" class="pointer-events-none opacity-0 transition-opacity duration-500 fixed inset-0 z-[9999] bg-[#03001e]/90"></div>

  <!-- Scripts -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="data/PencuriandenganPemberatan_1.js"></script>
        <script>
        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
              highlightLayer.setStyle({
                color: '#ffff00',
              });
            } else {
              highlightLayer.setStyle({
                fillColor: '#ffff00',
                fillOpacity: 1
              });
            }
            highlightLayer.openPopup();
        }
        var map = L.map('map', {
            zoomControl:false, maxZoom:25, minZoom:1
        }).fitBounds([[-7.370277323862506,112.53640134869487],[-7.16505003216019,112.88881184959784]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        // remove popup's row if "visible-with-data"
        function removeEmptyRowsFromPopupContent(content, feature) {
         var tempDiv = document.createElement('div');
         tempDiv.innerHTML = content;
         var rows = tempDiv.querySelectorAll('tr');
         for (var i = 0; i < rows.length; i++) {
             var td = rows[i].querySelector('td.visible-with-data');
             var key = td ? td.id : '';
             if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                 rows[i].parentNode.removeChild(rows[i]);
             }
         }
         return tempDiv.innerHTML;
        }
        // add class to format popup if it contains media
		function addClassToPopupIfMedia(content, popup) {
			var tempDiv = document.createElement('div');
			tempDiv.innerHTML = content;
			if (tempDiv.querySelector('td img')) {
				popup._contentNode.classList.add('media');
					// Delay to force the redraw
					setTimeout(function() {
						popup.update();
					}, 10);
			} else {
				popup._contentNode.classList.remove('media');
			}
		}
        var zoomControl = L.control.zoom({
            position: 'topleft'
        }).addTo(map);
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        map.createPane('pane_ESRIGrayDark_0');
        map.getPane('pane_ESRIGrayDark_0').style.zIndex = 400;
        var layer_ESRIGrayDark_0 = L.tileLayer('http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
            pane: 'pane_ESRIGrayDark_0',
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 25,
            minNativeZoom: 0,
            maxNativeZoom: 20
        });
        layer_ESRIGrayDark_0;
        map.addLayer(layer_ESRIGrayDark_0);
        function pop_PencuriandenganPemberatan_1(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['WADMKC_2'] !== null ? autolinker.link(feature.properties['WADMKC_2'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['WIADKC_2'] !== null ? autolinker.link(feature.properties['WIADKC_2'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['WADMKK_2'] !== null ? autolinker.link(feature.properties['WADMKK_2'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['WADMPR_2'] !== null ? autolinker.link(feature.properties['WADMPR_2'].toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['KERAWANAN'] !== null ? autolinker.link(feature.properties['KERAWANAN'].toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_PencuriandenganPemberatan_1_0(feature) {
            switch(String(feature.properties['KERAWANAN'])) {
                case 'SANGAT RENDAH':
                    return {
                pane: 'pane_PencuriandenganPemberatan_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(26,150,65,1.0)',
                interactive: true,
            }
                    break;
                case 'RENDAH':
                    return {
                pane: 'pane_PencuriandenganPemberatan_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(166,217,106,1.0)',
                interactive: true,
            }
                    break;
                case 'SEDANG':
                    return {
                pane: 'pane_PencuriandenganPemberatan_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,192,1.0)',
                interactive: true,
            }
                    break;
                case 'TINGGI':
                    return {
                pane: 'pane_PencuriandenganPemberatan_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(253,174,97,1.0)',
                interactive: true,
            }
                    break;
                case 'SANGAT TINGGI':
                    return {
                pane: 'pane_PencuriandenganPemberatan_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(215,25,28,1.0)',
                interactive: true,
            }
                    break;
            }
        }
        map.createPane('pane_PencuriandenganPemberatan_1');
        map.getPane('pane_PencuriandenganPemberatan_1').style.zIndex = 401;
        map.getPane('pane_PencuriandenganPemberatan_1').style['mix-blend-mode'] = 'normal';
        var layer_PencuriandenganPemberatan_1 = new L.geoJson(json_PencuriandenganPemberatan_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_PencuriandenganPemberatan_1',
            layerName: 'layer_PencuriandenganPemberatan_1',
            pane: 'pane_PencuriandenganPemberatan_1',
            onEachFeature: pop_PencuriandenganPemberatan_1,
            style: style_PencuriandenganPemberatan_1_0,
        });
        bounds_group.addLayer(layer_PencuriandenganPemberatan_1);
        map.addLayer(layer_PencuriandenganPemberatan_1);
        var baseMaps = {};
        var overlaysTree = [
            {label: 'Pencurian dengan Pemberatan<br /><table><tr><td style="text-align: center;"><img src="legend/PencuriandenganPemberatan_1_SANGATRENDAH0.png" /></td><td>SANGAT RENDAH</td></tr><tr><td style="text-align: center;"><img src="legend/PencuriandenganPemberatan_1_RENDAH1.png" /></td><td>RENDAH</td></tr><tr><td style="text-align: center;"><img src="legend/PencuriandenganPemberatan_1_SEDANG2.png" /></td><td>SEDANG</td></tr><tr><td style="text-align: center;"><img src="legend/PencuriandenganPemberatan_1_TINGGI3.png" /></td><td>TINGGI</td></tr><tr><td style="text-align: center;"><img src="legend/PencuriandenganPemberatan_1_SANGATTINGGI4.png" /></td><td>SANGAT TINGGI</td></tr></table>', layer: layer_PencuriandenganPemberatan_1},
            {label: "ESRI Gray (Dark)", layer: layer_ESRIGrayDark_0},]
        var lay = L.control.layers.tree(null, overlaysTree,{
            //namedToggle: true,
            //selectorBack: false,
            //closedSymbol: '&#8862; &#x1f5c0;',
            //openedSymbol: '&#8863; &#x1f5c1;',
            //collapseAll: 'Collapse all',
            //expandAll: 'Expand all',
            collapsed: false, 
        });
        lay.addTo(map);
		document.addEventListener("DOMContentLoaded", function() {
            // set new Layers List height which considers toggle icon
            function newLayersListHeight() {
                var layerScrollbarElement = document.querySelector('.leaflet-control-layers-scrollbar');
                if (layerScrollbarElement) {
                    var layersListElement = document.querySelector('.leaflet-control-layers-list');
                    var originalHeight = layersListElement.style.height 
                        || window.getComputedStyle(layersListElement).height;
                    var newHeight = parseFloat(originalHeight) - 50;
                    layersListElement.style.height = newHeight + 'px';
                }
            }
            var isLayersListExpanded = true;
            var controlLayersElement = document.querySelector('.leaflet-control-layers');
            var toggleLayerControl = document.querySelector('.leaflet-control-layers-toggle');
            // toggle Collapsed/Expanded and apply new Layers List height
            toggleLayerControl.addEventListener('click', function() {
                if (isLayersListExpanded) {
                    controlLayersElement.classList.remove('leaflet-control-layers-expanded');
                } else {
                    controlLayersElement.classList.add('leaflet-control-layers-expanded');
                }
                isLayersListExpanded = !isLayersListExpanded;
                newLayersListHeight()
            });	
			// apply new Layers List height if toggle layerstree
			if (controlLayersElement) {
				controlLayersElement.addEventListener('click', function(event) {
					var toggleLayerHeaderPointer = event.target.closest('.leaflet-layerstree-header-pointer span');
					if (toggleLayerHeaderPointer) {
						newLayersListHeight();
					}
				});
			}
            // Collapsed/Expanded at Start to apply new height
            setTimeout(function() {
                toggleLayerControl.click();
            }, 10);
            setTimeout(function() {
                toggleLayerControl.click();
            }, 10);
            // Collapsed touch/small screen
            var isSmallScreen = window.innerWidth < 650;
            if (isSmallScreen) {
                setTimeout(function() {
                    controlLayersElement.classList.remove('leaflet-control-layers-expanded');
                    isLayersListExpanded = !isLayersListExpanded;
                }, 500);
            }  
        });       
        setBounds();
        </script>
  <script>
    AOS.init(
      {
        easing: 'ease-in-out',
        duration: 1000, // Durasi animasi dalam milidetik
    }
    );
  </script>
  <script src="../src/script.js"></script>
  <script>
    // Mobile menu logic
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
    // Tutup menu mobile saat klik link
    mobileMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
      });
    });
  </script>
</body>
</html>